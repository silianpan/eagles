!function(S,x){"use strict";var o="ht",j=S[o],f="position",D="absolute",Z="px",J="left",M="top",W="innerHTML",U="className",d="width",V="height",w="0",u="display",p="none",K="visibility",G="user-select",O="margin",n="padding",_=null,y=j.Color,I=j.Default,B=I.getInternal(),h=S.setTimeout,k=S.setInterval,s=S.clearTimeout,r=S.clearInterval,H=S.parseInt,c=I.isLeftButton,Q=I.isDragging,R=I.startDragging,g=I.getDistance,X=I.isTouchable,t=y.widgetIconHighlight,l=y.widgetIconBorder,v=y.widgetIconGradient,E=function(){return document},C=function(q,M){return q.querySelectorAll(M)},i=function(D){var G=E().createElement(D);return"ul"===D&&(L(G,f,"relative"),L(G,O,w),L(G,n,w),L(G,"list-style",p),L(G,"box-sizing","border-box"),L(G,"-moz-box-sizing","border-box"),L(G,u,"inline-block"),L(G,"vertical-align","text-bottom"),L(G,"border","1px solid "+I.contextMenuBorderColor),L(G,"box-shadow","0 0 16px 1px "+I.contextMenuShadowColor),L(G,"overflow","hidden"),I.contextMenuBorderRadius&&L(G,"border-radius",I.contextMenuBorderRadius+Z)),G},a=function(O){var p=O.touches[0];return p?p:O.changedTouches[0]},A=function(){return i("div")},z=function(){return i("canvas")},L=function(f,E,P){f.style.setProperty(E,P,_)},$=function(G,R,V){I.def(j.widget[G],R,V)},e=function(d,N){d.appendChild(N)},T=function(c,Q){c.removeChild(Q)},N=function(){return E().body},F=function(_,p,F,X){_.addEventListener(p,F,!!X)},P=function(D,g,X,O){D.removeEventListener(g,X,!!O)};B.addMethod(I,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:l},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:t}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:l},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:t,gradient:I.imageGradient,gradientColor:v,background:t}]},contextMenuLabelFont:(X?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var b=function(d){var e=this,m=d._view;if(e.$11b=d,e.addListeners(),F(m,"contextmenu",function(b){b.preventDefault()}),!X){var O=e.$37b=e.$36b.bind(e);F(m,"mouseover",O),F(m,"mouseout",O)}};I.def(b,x,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(G){if(I.preventDefault(G),c(G)){for(var y=this,g=y.$11b,U=y.getView(),P=U.children,e=0;e<P.length;e++){var Z=P[e],z=Z.$24b,B=Z.$25b;if(z&&z.contains(G.target))return g.scrollUp(Z),y.$28b=h(function(){y.$29b=k(function(){g.scrollUp(Z)},100)},500),R(y,G),void 0;if(B&&B.contains(G.target))return g.scrollDown(Z),y.$28b=h(function(){y.$29b=k(function(){g.scrollDown(Z)},100)},500),R(y,G),void 0}X&&(G=a(G)),y.$30b={x:G.pageX,y:G.pageY}}},handle_mousedown:function(h){this.handle_touchstart(h)},handle_touchend:function(H){if(c(H)){var W=this,E=W.$30b,i=X?{x:a(H).pageX,y:a(H).pageY}:{x:H.pageX,y:H.pageY};if(!E||g(E,i)>1)return delete W.$30b,void 0;for(var K=W.getView(),$=W.$11b,O=H.target,e=_,D=_,C=$._items,Z=K.$26b,d=0;d<Z.length;d++)if(D=Z[d],D.contains(O)){e=D.getAttribute("data-id");break}if(e&&C){var Q=$.$17b(C,function(f){return f._id===e});if(Q){var n=!1;Q.disabled instanceof Function?n=Q.disabled.call($,Q):Q.disabled===!0&&(n=!0),n||(Q.items?X&&W.$36b(D,!0):$.$1b(Q,H))}}delete W.$30b}},$36b:function(E,b){if(!Q()){var _,T=this,q=T.$11b,o=T.getView(),u=q.$20b||o.children[0],r=q.$19b,i=o.$26b,W=o.children,S=E.target,Y=o.getBoundingClientRect(),s=I.getWindowInfo(),P=s.width,k=s.height,z=function(Z){for(var d=0;d<W.length;d++){var w=W[d],v=new RegExp(Z+"$"),x=w[U];if(x&&(v.test(x)||x.indexOf(Z+" ")>=0))return w}},D=function(Q){for(var G=0;G<i.length;G++){var M=i[G],j=new RegExp(Q+"$"),V=M[U];if(V&&(j.test(V)||V.indexOf(Q+" ")>=0))return M}},y=function(r){var N=D("menu-item"+r.$45b),w=N.getBoundingClientRect(),B=w.top-Y.top,O=w.left-Y.left;L(r,M,B+Z),L(r,J,O+w.width+Z);var R=r.getBoundingClientRect(),f=R.top,z=R.left,u=R.height,F=R.width,C=f+u+2,W=z+F+2;C>k&&L(r,M,B+k-C+Z),W>P&&L(r,J,O-F+Z)};if(b)_=E;else{if("mouseover"===E.type){for(var $=0;$<i.length;$++){var R=i[$];if(R.contains(S)){_=R;break}}if(!_&&r){var N=r.parentNode,e=z("submenu"+r.getAttribute("data-id"));(e&&e.contains(S)||N&&N.contains(S))&&(_=r)}}else if("mouseout"===E.type){for(var c=!1,A=E.relatedTarget,$=0;$<W.length;$++){var X=W[$];if("hidden"!==X.style.visibility&&X.contains(A)){c=!0;break}}if(c)return}!_&&u&&(_=D("menu-item"+(u.$45b||"NaN")))}if(_!=r){if(r)for(var H=r;H;){H[U]=H[U].replace(" menu-item-hover",""),H[U].indexOf("disabled")<0&&(L(H,"background-color",I.contextMenuBackground),L(H,"color",I.contextMenuLabelColor));var p=z("submenu"+H.getAttribute("data-id"));p&&L(p,K,"hidden");var w=H.parentNode;H=D("menu-item"+(w.$45b||"NaN"))}if(_){for(var V=_,G=[];V;){V[U]+=" menu-item-hover",V[U].indexOf("disabled")<0&&(L(V,"background-color",I.contextMenuHoverBackground),L(V,"color",I.contextMenuHoverLabelColor));var x=z("submenu"+V.getAttribute("data-id"));x&&(L(x,K,"visible"),G.push(x));var w=V.parentNode;V=D("menu-item"+(w.$45b||"NaN"))}G.reverse(),G.forEach(function(Z){y(Z)})}}q.$19b=_,q.$20b=_?_.parentNode:o.children[0]}},handle_mouseup:function(c){this.handle_touchend(c)},handleWindowTouchEnd:function(){var N=this;N.$28b!=_&&(s(N.$28b),delete N.$28b),N.$29b!=_&&(r(N.$29b),delete N.$29b),delete N.$34b,delete N.$30b,delete N.$35b},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)},handle_mousemove:function(u){this.handle_touchmove(u)},handle_touchmove:function(d){if(!Q()&&c(d)){for(var k=this,T=k.getView().children,n=_,P=0;P<T.length;P++){var Y=T[P];if(Y.contains(d.target)){n=Y;break}}var N=k.$30b,w=X?{x:a(d).pageX,y:a(d).pageY}:{x:d.pageX,y:d.pageY};n&&N&&g(N,w)>2&&(R(k,d),k.$34b=n,k.$35b=n.$18b)}},handleWindowTouchMove:function(D){D.preventDefault();var P=this,Y=P.$11b,B=P.$34b,I=P.$35b,Q=P.$30b;if(Q&&B){var x=X?{x:a(D).pageX,y:a(D).pageY}:{x:D.pageX,y:D.pageY},C=x.y-Q.y;C>0?Y.scrollUp(B,B.$18b-(I-C)):Y.scrollDown(B,I-C-B.$18b)}},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},$10b:function($,Z){$.preventDefault();for(var C=this,a=C.getView().children,V=_,z=0;z<a.length;z++){var U=a[z];if(U.contains($.target)){V=U;break}}if(V){var n=this.$11b,i=n.getRowHeight();Math.abs(Z)>.05&&(Z>0?n.scrollUp(V,Z*i):0>Z&&n.scrollDown(V,-Z*i))}},handle_mousewheel:function(o){this.$10b(o,o.wheelDelta/40)},handle_DOMMouseScroll:function(Z){this.$10b(Z,-Z.detail)},$44b:function(l){this.getView().contains(l.target)||this.$11b.hide()},$41b:function(W){this.$11b.show(W)},$4b:function(q,Z){var y=this.$11b;if(Z=Z||y._items,Z&&Z.length&&q.keyCode){var c=[q.keyCode];q.shiftKey&&c.push(16),q.ctrlKey&&c.push(17),q.altKey&&c.push(18),/mac/.test(S.navigator?S.navigator.userAgent.toLowerCase():"")?q.metaKey&&c.push(17):q.metaKey&&c.push(91),c.sort();var X=c.join(),A=y.$17b(Z,function(Y){if(Y.key){var I=Y.key.slice(0);return I.sort(),X===I.join()}});if(A){A.preventDefault!==!1&&q.preventDefault();var W=!1;A.disabled instanceof Function?W=A.disabled.call(y,A):A.disabled===!0&&(W=!0),W||y.$1b(A,q)}}},$39b:function(O){var d=this,D=a(O);d.$32b={x:D.pageX,y:D.pageY}},$38b:function(l){var c=this,R=a(l);c.$31b={x:R.pageX,y:R.pageY},c.$33b=h(function(){c.$31b&&(c.$32b?g(c.$31b,c.$32b)<10&&c.$11b.show(l):c.$11b.show(l)),delete c.$33b,delete c.$31b,delete c.$32b},600)},$40b:function(){var H=this;H.$33b!=_&&(s(H.$33b),delete H.$33b,delete H.$31b,delete H.$32b)}}),j.widget.ContextMenu=function(h){var l=this,o=l._view=B.createView(null,l);o[U]="ht-widget-contextmenu",l.setItems(h),l.$13b=new b(l),L(o,"font",I.contextMenuLabelFont),L(o,f,D),L(o,"cursor","default"),L(o,"-webkit-"+G,p),L(o,"-moz-"+G,p),L(o,"-ms-"+G,p),L(o,G,p),L(o,"box-sizing","border-box"),L(o,"-moz-box-sizing","border-box"),I.baseZIndex!=_&&L(o,"z-index",H(I.baseZIndex)+2+""),l.$3b=function(K){l.$13b.$4b(K)}},$("ContextMenu",x,{$5b:0,_items:_,$21b:_,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var l=this,D=l._enableGlobalKey;D===!1&&(F(E(),"keydown",l.$3b),l._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,P(E(),"keydown",this.$3b)},setItems:function(O){this._items=O},getItems:function(){return this._items},setVisibleFunc:function(s){this.$16b=s},setLabelMaxWidth:function(Y){this.$43b=Y},$1b:function(f,g){var C=this;if("check"===f.type)f.selected=!f.selected;else if("radio"===f.type){var E=f.groupId;C.$17b(C._items,function($){$.groupId===E&&($.selected=!1)}),f.selected=!0}if(C.hide(),f.action)f.action.apply(f.scope||C,[f,g]);else if(f.href){var H=f.linkTarget||"_self";S.open(f.href,H)}},getItemByProperty:function(w,G,$){var W=this;if($=$||W._items,!$||0===$.length)return _;var Z=W.$17b($,function(V){return V[w]===G});return Z||_},scrollUp:function(U,r){var I=this;if(r=r==_?20:r,r=H(r),0!==r){var g=0;U.$18b>r&&(g=U.$18b-r),I.$42b(U,g),U.scrollTop=g,U.$18b=g}},scrollDown:function(y,I){var S=this;if(I=I==_?20:I,I=H(I),0!==I){var v=y.$22b,T=y.$23b,k=v-T;T+y.$18b+I<v&&(k=y.$18b+I),S.$42b(y,k),y.scrollTop=k,y.$18b=k}},$42b:function(y,k){k=k==_?y.$18b:k;var A=y.$24b,P=y.$25b;A&&(L(A,"top",k+Z),0==k?L(A,u,p):L(A,u,"block")),P&&(L(P,"bottom",-k+Z),k==y.$22b-y.$23b?L(P,u,p):L(P,u,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(k,T){for(var $=0;$<k.length;$++){var F=k[$];if(T(F))return F;if(F.items){var R=this.$17b(F.items,T);if(R)return R}}},$2b:function(r,P){for(var X=this,m=0;m<r.length;m++){X.$5b++;var T=r[m];if(!X.$16b||X.$16b.call(X,T)){var o=i("li"),p=X.$5b+"";if(L(o,"white-space","nowrap"),L(o,u,"block"),"separator"===T||T.separator===!0){var M=A();M[U]="separator",L(M,V,I.contextMenuSeparatorWidth+Z),L(M,"background",I.contextMenuSeparatorColor),e(o,M)}else{T._id=p,o.setAttribute("data-id",p);var s=i("span"),q=i("span"),c=z(),E=A();if(L(s,u,"inline-block"),L(q,u,"inline-block"),c[U]="prefix",L(c,u,"inline-block"),L(c,d,"1em"),L(c,V,"1em"),L(c,"vertical-align","middle"),L(c,O,"0 0.2em"),"check"===T.type&&T.selected?c[U]+=" check-prefix":"radio"===T.type&&T.selected&&(c[U]+=" radio-prefix"),e(o,c),T.icon){var t=z();t[U]="contextmenu-item-icon",L(t,u,"inline-block"),L(t,"vertical-align","middle"),L(t,V,"1.2em"),L(t,d,"1.2em"),L(t,"margin-right","0.2em"),t.$50b=T.icon,e(s,t)}if(q[W]=T.label,e(s,q),e(o,s),E[U]="suffix",L(E,u,"inline-block"),L(E,"margin-left","1em"),L(E,"margin-right","0.4em"),L(E,"text-align","right"),L(E,"font-size","75%"),T.items&&(E[W]=I.contextMenuSubmenuMark),T.suffix&&(E[W]=T.suffix),e(o,E),o[U]="menu-item menu-item"+p,L(o,"background-color",I.contextMenuBackground),L(o,"color",I.contextMenuLabelColor),L(o,n,"3px 0"),T.disabled instanceof Function){var g=T.disabled.call(X,T);g&&(o[U]+=" disabled",L(o,"color",I.contextMenuDisabledLabelColor))}else T.disabled&&(o[U]+=" disabled",L(o,"color",I.contextMenuDisabledLabelColor));if(T.items){X.$21b||(X.$21b=new j.List);var h=i("ul");h[U]="submenu"+p,h.$45b=p,L(h,K,"hidden"),L(h,f,D),e(X._view,h),X.$21b.add(h),X.$2b(T.items,h)}}e(P,o)}}},rebuild:function(){var k=this,U=k._items,n=k._view;if(n&&(n[W]="",k.$21b=_,k.$5b=0,k.$19b=_,k.$20b=_,n.$26b=_,U&&0!==U.length)){var I=i("ul",k._r);e(n,I),k.$2b(U,I)}},addTo:function(Y){if(Y){var V=this,y=V.$13b;if(V.$12b=Y,V.$9b=function(D){y.$44b(D)},V.$27b=function(p){y.$41b(p)},X){var E=V.$6b=function(H){y.$38b(H)},z=V.$7b=function(E){y.$39b(E)},o=V.$8b=function(N){y.$40b(N)};F(Y,"touchstart",E,!0),F(Y,"touchmove",z),F(Y,"touchend",o)}else F(Y,"contextmenu",V.$27b)}},show:function(h,Y,y){var c=this,y=y==_?!0:!1,n=c._view;if(n){if(c.invalidate(),1===arguments.length){var s=h;if(X){var v=a(s);h=v.pageX,Y=v.pageY}else h=s.pageX,Y=s.pageY}var O=I.getWindowInfo(),x=O.width,H=O.height,z=O.left,S=O.top,G={pageX:h,pageY:Y,clientX:h-z,clientY:Y-S,target:1,originEvent:s},j=G.clientX,l=G.clientY,K=function(v){v.style.height=H-6+Z;var Y=A(),y=A(),i=function(E){L(E,f,D),L(E,"text-align","center"),L(E,d,"100%"),L(E,"font-size",10+Z),L(E,"padding","2px 0"),L(E,"border","0px solid "+I.contextMenuScrollerBorderColor),L(E,"background-color",I.contextMenuScrollerColor1),E.style.backgroundImage="-webkit-linear-gradient(top, "+I.contextMenuScrollerColor1+", "+I.contextMenuScrollerColor2+")",E.style.backgroundImage="linear-gradient(to bottom, "+I.contextMenuScrollerColor1+", "+I.contextMenuScrollerColor2+")"};Y[U]="menu-arrow-item menu-arrow-item-top",y[U]="menu-arrow-item menu-arrow-item-bottom",i(Y),L(Y,"top",w),L(Y,"left",w),L(Y,"border-bottom-width",1+Z),Y[W]="▲",i(y),L(y,"bottom",w),L(y,"left",w),L(y,"border-top-width",1+Z),y[W]="▼",v.$24b=Y,v.$25b=y,v.$18b=v.scrollTop,v.$22b=v.scrollHeight,v.$23b=v.clientHeight,e(v,Y),e(v,y),c.$42b(v)};c.beforeShow&&c.beforeShow(G);var B=c._items;if(B&&(s&&s.preventDefault(),B.length)){c.rebuild(),e(N(),n),n.$26b=C(n,".menu-item");var m=n.children[0];m.offsetHeight>H&&K(m);var k=l+(y?1:0),T=j+(y?1:0),V=function(K){for(var q=0,n=0,D=0,V=c.$43b;D<K.children.length;D++){var b=K.children[D];if(b.getAttribute("data-id")){var t=b.children[1],T=b.children[2],A=t.children;if(V){var v=A[0];A.length>1&&(v=A[1]),v.offsetWidth>V&&(v[W]="<marquee scrollamount='3'>"+v[W]+"</marquee>",v.children[0].style.verticalAlign="text-bottom",L(v,d,V+Z),L(v,u,"inline-block"))}var p=t.offsetWidth,$=T.offsetWidth;p>q&&(q=p),$>n&&(n=$)}}for(D=0;D<K.children.length;D++){var b=K.children[D];if(b.getAttribute("data-id")){var t=b.children[1],T=b.children[2],J=t.children[0],I=t.children[1];!I&&J.style.width&&L(J,d,q+Z),L(t,d,q+Z),L(T,d,n+Z)}}};V(m);var P=l+3+n.offsetHeight,R=j+3+n.offsetWidth;P>H?L(n,M,k-(P-H)+S+Z):L(n,M,k+S+Z),R>x?L(n,J,T-(R-x)+z+Z):L(n,J,T+z+Z);var r=c.$21b;r&&r.each(function(L){V(L),L.offsetHeight>H&&K(L)}),c.$9b&&F(E(),X?"touchstart":"mousedown",c.$9b,!0),c.afterShow&&c.afterShow(G),c.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=_:!1},getRelatedView:function(){return this.$12b},hide:function(){var Q=this,$=Q._view;$&&$.parentNode&&(T($.parentNode,$),P(E(),X?"touchstart":"mousedown",Q.$9b,!0),Q.afterHide&&Q.afterHide())},dispose:function(){var J=this,j=J.$12b,S=J._view;S&&(S.parentNode&&T(S.parentNode,S),J.disableGlobalKey(),j&&(X?(P(j,"touchstart",J.$6b,!0),P(j,"touchmove",J.$7b),P(j,"touchend",J.$8b)):P(j,"contextmenu",J.$27b)),J._view=J._items=J.$21b=J.$19b=J.$12b=J.beforeShow=J.afterShow=J.afterHide=J.$9b=J.$3b=J.$6b=J.$7b=J.$8b=J.$27b=_)},$46b:function(r,s,n,f){var Z=B.initContext(r);B.translateAndScale(Z,0,0,1),Z.clearRect(0,0,n,f),I.drawStretchImage(Z,I.getImage(s),"fill",0,0,n,f),Z.restore()},$47b:function(){var U,e,X,E=this,A=E._view;if(E.isShowing()){var L=C(A,".check-prefix");for(X=0;X<L.length;X++){var f=L[X];U=f.clientWidth,e=f.clientHeight,f.$48b=U,f.$49b=e,B.setCanvas(f,U,e)}var x=C(A,".radio-prefix");for(X=0;X<x.length;X++){var s=x[X];U=s.clientWidth,e=s.clientHeight,s.$48b=U,s.$49b=e,B.setCanvas(s,U,e)}var J=C(A,".contextmenu-item-icon");for(X=0;X<J.length;X++){var w=J[X];U=w.clientWidth,e=w.clientHeight,w.$48b=U,w.$49b=e,B.setCanvas(w,U,e)}}},validateImpl:function(){var X,v,q,c=this,E=c._view;if(c.isShowing()){var $=C(E,".check-prefix");for(q=0;q<$.length;q++){var u=$[q];X=u.$48b,v=u.$49b,X&&v&&c.$46b(u,I.contextMenuCheckIcon,X,v)}var D=C(E,".radio-prefix");for(q=0;q<D.length;q++){var f=D[q];X=f.$48b,v=f.$49b,X&&v&&c.$46b(f,I.contextMenuRadioIcon,X,v)}var t=C(E,".contextmenu-item-icon");for(q=0;q<t.length;q++){var n=t[q];X=n.$48b,v=n.$49b,X&&v&&c.$46b(n,I.getImage(n.$50b),X,v)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);